{% extends 'layout.html' %}
{% block title %} - Index{% endblock %}
{% block content %}

<h3>Index</h3>
<br>
{% for post in posts %}
  <div class='card card-outline-secondary'>
    <div class='card-header'>
      <h4>{{ post.title }}</h4>
      <small class='card-subtitle text-muted'>{{ post.time.month }}/{{ post.time.day }}/{{ post.time.year }}</small>
      {% if current_user.is_authenticated %}
        <small><a class='text-warning' href='{{ url_for("edit_post",post_id=post.id) }}'>Edit</a></small>
        <small><a class='text-danger' href='{{ url_for("delete_post",post_id=post.id) }}'>Delete</a></small>
      {% endif %}
      <br>
      <small class='text-muted'><em>{{ post.tags|join(', ',attribute='name') }}</em></small>
    </div>
    <div class='card-block'>
      <p class='card-text'>{{ post.body|safe|truncate(200,False) }}</p>
    </div>
  </div>
  <br>
{% endfor %}

{% endblock %}
