{% extends 'layout.html' %}
{% block title %}Blog{% endblock %}
{% block content %}

<h3>Blog</h3>
<br>
{% for article in articles %}
  <div class='card card-outline-secondary'>
    <div class='card-header'>
      <a class='to-article' href='{{ url_for("article",article_id=article.id) }}'>
        <h4>{{ article.title }}</h4>
      </a>
      <small class='card-subtitle text-muted'>{{ article.time.month }}/{{ article.time.day }}/{{ article.time.year }}</small>
       {% if current_user.is_authenticated %} 
      <small><a class='text-warning' href='{{ url_for("edit_article",article_id=article.id) }}'>Edit</a></small>
      <small><a class='text-danger' href='{{ url_for("delete_article",article_id=article.id) }}'>Delete</a></small>
       {% endif %} 
      <br>
      <small class='text-muted'><em>{{ article.tags|join(', ',attribute='name') }}</em></small>
    </div>
    <div class='card-block'>
      <a class='to-article' href='{{ url_for("article",article_id=article.id) }}'>
        <p class='card-text'>{{ article.body_to_html('blog')|safe|truncate(200,False,'(...)') }}</p>
      </a>
    </div>
  </div>
  <br>
{% endfor %}

{% endblock %}
